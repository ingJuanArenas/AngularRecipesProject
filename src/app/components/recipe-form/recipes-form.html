<div class="w-full min-h-screen bg-gradient-to-tr from-amber-400 via-orange-700 to-rose-700 p-0">
  <div class="w-full text-center py-8">
    <h1 class="font-extrabold text-4xl sm:text-5xl text-white drop-shadow-lg tracking-wide">
      A COMER RICO
    </h1>
    <p class="font-bold text-lg text-orange-100 mt-2">
      @if(this.isEditMode()){
        Editando receta
      }@else {
        Crear nueva receta
      }
    </p>
  </div>
  <div class="max-w-2xl mx-auto px-5 mb-6">
    <button type="button" class="inline-flex items-center gap-2 text-sm px-3 py-2 rounded-lg bg-white/80 border border-orange-300 text-orange-700 hover:bg-orange-200 hover:text-orange-900 shadow font-medium transition mb-4" (click)="goBack()">
      <span class="font-bold">←</span>
      Volver
    </button>
  </div>
  <div class="bg-white/90 rounded-3xl max-w-2xl mx-auto my-4 px-3 md:px-10 py-8 shadow-2xl">
    @if (loading()) {
      <div class="flex flex-col items-center justify-center min-h-48 py-8">
        <div class="animate-spin rounded-full h-12 w-12 border-b-4 border-orange-700 mb-4"></div>
        <p class="text-xl text-orange-700 font-semibold">Cargando detalles ...</p>
      </div>
    }@else if (error()) {
      <div class="text-center p-8 text-red-600 bg-red-100 border border-red-400 rounded-xl shadow-lg">
        <p class="font-bold text-lg mb-3">¡Ocurrió un error!</p>
        <p class="text-base">{{error()}}</p>
      </div>
    }@else {
      <form [formGroup]="recipeForm" (ngSubmit)="isEditMode() ? update() : saveData()">
      <div class="grid grid-cols-1 gap-5">
        <label for="name" class="font-semibold text-gray-700">Nombre</label>
        <input formControlName="name" type="text" placeholder="Nombre de la receta" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition">    
        @if (recipeForm.get("name")?.invalid && recipeForm.get("name")?.touched) {
          <p class="text-red-600">Este campo es obligatorio</p>
        }
        <label for="description" class="font-semibold text-gray-700">Descripción</label>
        <textarea formControlName="description" placeholder="Describe brevemente la receta" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition resize-none"></textarea>
          @if (recipeForm.get("description")?.invalid && recipeForm.get("description")?.touched) {
            @if (recipeForm.get("description")?.errors?.['required']) {
                 <p class="text-red-600">Este campo es obligatorio</p>
            }
             @if (recipeForm.get("descripcion")?.errors?.['minlength']) {
           <p class="text-red-600">El campo debe de tener mínimo 20 caracteres</p>
         }
        }
        <label for="time" class="font-semibold text-gray-700">Tiempo de preparación</label>
        <input formControlName="time" type="number" placeholder="Tiempo en minutos" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition">
          @if (recipeForm.get("time")?.invalid && recipeForm.get("time")?.touched) {
            @if (recipeForm.get("time")?.errors?.['required']) {
                 <p class="text-red-600">Este campo es obligatorio</p>
            }
             @if (recipeForm.get("time")?.errors?.['min']) {
           <p class="text-red-600">El tiempo mínimo es 5 minutos</p>
         }
        }
        <label for="id" class="font-semibold text-gray-700">ID</label>
        <input formControlName="id" placeholder="ID" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition">
          @if (recipeForm.get("id")?.invalid && recipeForm.get("id")?.touched) {
            @if (recipeForm.get("id")?.errors?.['required']) {
                 <p class="text-red-600">Este campo es obligatorio</p>
            }
             @if (recipeForm.get("id")?.errors?.['min']) {
           <p class="text-red-600">Introduzca un valor positivo</p>
         }
        }
        <label for="src" class="font-semibold text-gray-700">Imagen</label>
        <input formControlName="src" placeholder="URL de la imagen" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition">
         @if (recipeForm.get("src")?.invalid && recipeForm.get("id")?.touched) {
            @if (recipeForm.get("src")?.errors?.['required']) {
                 <p class="text-red-600">Este campo es obligatorio</p>
            }
             @if (recipeForm.get("src")?.errors?.['pattern']) {
           <p class="text-red-600">La url está mal escrita</p>
         }
        }
        <label for="instructions" class="font-semibold text-gray-700">Preparación</label>
        <textarea formControlName="instructions" placeholder="Detalla los pasos de preparación" class="border-2 border-orange-400 rounded-xl px-4 py-3 shadow focus:outline-none focus:border-amber-600 text-lg transition resize-none"></textarea>
          @if (recipeForm.get("instructions")?.invalid && recipeForm.get("instructions")?.touched) {
            @if (recipeForm.get("instructions")?.errors?.['required']) {
                 <p class="text-red-600">Este campo es obligatorio</p>
            }
             @if (recipeForm.get("instructions")?.errors?.['minlength']) {
           <p class="text-red-600">El campo debe de tener mínimo 100 caracteres</p>
         }
        }
      </div>
      <div class="flex justify-center pt-6">
        <button type="submit" [disabled]="recipeForm.invalid"
         class="bg-blue-600 text-white px-8 py-3 rounded-xl font-semibold text-lg tracking-wide hover:bg-blue-700 shadow transition disabled:opacity-50 disabled:cursor-not-allowed">
         @if(isEditMode()){
          Actualizar
         }@else{
         Publicar
         }
        </button>
      </div>
      </form>
    }
  </div>
</div>
